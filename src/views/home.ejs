<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="./style.css">
    <title><%= title %></title>
</head>
<body>
    <div class="topnav">
        <a class="active" href="/">Home</a>
        <a href="upload">Upload file</a>

      </div>
    <div>
      <div class="w3-container">
        <h2>Lisr user table</h2>
      
        <table class="w3-table-all w3-hoverable">
          <thead>
            <tr class="w3-light-grey">
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
              <% for(let i = 0; i < dataUser.length; i++) { %>
                <tr>
                    <td><%= dataUser[i].firstName %></td>
                    <td><%= dataUser[i].lastName %></td>
                    <td><%= dataUser[i].email %></td>
                    <td>
                        <button><a href="/detail/user/<%= dataUser[i].id %>">Detail</a></button>
                          <button><a href="/edit-user/<%= dataUser[i].id %>" >Edit</a></button>
                        <!-- <form method="POST" action="/delete-user">    --> <!-- cách này nhanh nhưng sẽ tạo rất nhiều form nếu có nhiều data -->
                          <button id="<%= dataUser[i].id %>" onClick="reply_click(this.id)" >Delete</button>
                          <!-- <input type="hidden" name="userId" value="<%= dataUser[i].id %>"> -->
                        <!-- </form> -->
                    </td>
                </tr>
              <% } %>
          </tbody>
        </table>

        <!-- form hidden form -->
        <form name="delete-course-form" method="POST"></form>

      </div>
      <div class="form__add--user">
        <form method="POST" action="/create-new-user">
          <h2>Add user</h2>
  
          <label for="firstName">First Name</label>
          <input type="text" id="fname" name="firstName" placeholder="Your name..">
      
          <label for="lastName">Last Name</label>
          <input type="text" id="lname" name="lastName" placeholder="Your last name..">
      
          <label for="email">Your Email</label>
          <input type="text" id="email" name="email" placeholder="Your Email..">
        
          <label for="phone">Your Phone</label>
          <input type="text" id="phone" name="phone" placeholder="Your Phone..">

          <input type="submit" value="Add">
        </form>
      </div>
    </div>

<script>
  const formD = document.forms['delete-course-form']
  function reply_click(id) {
    console.log(id)
    formD.action = '/delete-user/' + id 
    formD.method = 'POST'
    formD.submit()
  }
</script>

</body>
</html>